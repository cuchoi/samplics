<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Tabulation &#8212; samplics 0.3.5 documentation</title>
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="../_static/bootstrap-sphinx.css" type="text/css" />
    <link rel="stylesheet" type="text/css" href="../_static/_source/samplics_style.css" />
    <link rel="stylesheet" type="text/css" href="../_static/samplics_style.css" />
    <script id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/doctools.js"></script>
    <script crossorigin="anonymous" integrity="sha256-Ae2Vz/4ePdIu6ZyI/5ZGsYnb+m0JlOmKPjt6XZ9JJkA=" src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="T-test" href="ttest.html" />
    <link rel="prev" title="Estimation of population parameters" href="estimation.html" />
<meta charset='utf-8'>
<meta http-equiv='X-UA-Compatible' content='IE=edge,chrome=1'>
<meta name='viewport' content='width=device-width, initial-scale=1.0, maximum-scale=1'>
<meta name="apple-mobile-web-app-capable" content="yes">
<script type="text/javascript" src="../_static/js/jquery-1.11.0.min.js "></script>
<script type="text/javascript" src="../_static/js/jquery-fix.js "></script>
<script type="text/javascript" src="../_static/bootstrap-3.3.7/js/bootstrap.min.js "></script>
<script type="text/javascript" src="../_static/bootstrap-sphinx.js "></script>

  </head><body>

  <div id="navbar" class="navbar navbar-default navbar-fixed-top">
    <div class="container">
      <div class="navbar-header">
        <!-- .btn-navbar is used as the toggle for collapsed navbar content -->
        <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".nav-collapse">
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>
        <a class="navbar-brand" href="../index.html">
          Sample Analytics</a>
        <span class="navbar-text navbar-version pull-left"><b>0.3.5</b></span>
      </div>

        <div class="collapse navbar-collapse nav-collapse">
          <ul class="nav navbar-nav">
            
                <li><a href="../gettingstarted.html">Getting started</a></li>
                <li><a href="index.html">Tutorial</a></li>
                <li><a href="https://github.com/survey-methods/samplics">Github</a></li>
            
            
              <li class="dropdown globaltoc-container">
  <a role="button"
     id="dLabelGlobalToc"
     data-toggle="dropdown"
     data-target="#"
     href="../index.html">Documentation <b class="caret"></b></a>
  <ul class="dropdown-menu globaltoc"
      role="menu"
      aria-labelledby="dLabelGlobalToc"><ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../gettingstarted.html">How to get started</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../gettingstarted.html#installation">Installation</a></li>
<li class="toctree-l2"><a class="reference internal" href="../gettingstarted.html#dependencies">Dependencies</a></li>
<li class="toctree-l2"><a class="reference internal" href="../gettingstarted.html#usage">Usage</a></li>
<li class="toctree-l2"><a class="reference internal" href="../gettingstarted.html#contributing">Contributing</a></li>
<li class="toctree-l2"><a class="reference internal" href="../gettingstarted.html#license">License</a></li>
</ul>
</li>
<li class="toctree-l1 current"><a class="reference internal" href="index.html">Tutorial</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="index.html#datasets-for-the-tutorial">Datasets for the tutorial</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#sample-size-calculation">Sample size calculation</a><ul>
<li class="toctree-l3"><a class="reference internal" href="sample_size_calculation.html">Sample size calculation for stage sampling</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="index.html#sample-selection">Sample selection</a><ul>
<li class="toctree-l3"><a class="reference internal" href="psu_selection.html">Selection of primary sampling units (PSUs)</a></li>
<li class="toctree-l3"><a class="reference internal" href="ssu_selection.html">Selection of secondary sampling units (SSUs)</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="index.html#sample-weighting">Sample weighting</a><ul>
<li class="toctree-l3"><a class="reference internal" href="sample_weights.html">Sample weight adjustment</a></li>
<li class="toctree-l3"><a class="reference internal" href="replicate_weights.html">Replicate weights</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="index.html#population-parameters-estimation">Population parameters estimation</a><ul>
<li class="toctree-l3"><a class="reference internal" href="estimation.html">Estimation of population parameters</a></li>
</ul>
</li>
<li class="toctree-l2 current"><a class="reference internal" href="index.html#categorical-data-analysis">Categorical data analysis</a><ul class="current">
<li class="toctree-l3 current"><a class="current reference internal" href="#">Tabulation</a></li>
<li class="toctree-l3"><a class="reference internal" href="ttest.html">T-test</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="index.html#small-area-estimation-sae">Small Area Estimation (SAE)</a><ul>
<li class="toctree-l3"><a class="reference internal" href="eblup_area_model.html">Area level model: empirical best linear unbiased predictor (EBLUP)</a></li>
<li class="toctree-l3"><a class="reference internal" href="eblup_unit_model.html">Unit level model: empirical best linear unbiased Prediction (EBLUP)</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../usecases.html">Use Cases</a></li>
<li class="toctree-l1"><a class="reference internal" href="../modules.html">API Documentation</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../samplics.sampling.html">Sampling</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../samplics.sampling.html#module-samplics.sampling.selection">samplics.sampling.selection</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../samplics.weighting.html">Weighting</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../samplics.weighting.html#module-samplics.weighting.adjustment">samplics.weighting.adjustment</a></li>
<li class="toctree-l3"><a class="reference internal" href="../samplics.weighting.html#module-samplics.weighting.replicates">samplics.weighting.replicates</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../samplics.estimation.html">Estimation</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../samplics.estimation.html#module-samplics.estimation.expansion">samplics.estimation.expansion</a></li>
<li class="toctree-l3"><a class="reference internal" href="../samplics.estimation.html#module-samplics.estimation.regression">samplics.estimation.regression</a></li>
<li class="toctree-l3"><a class="reference internal" href="../samplics.estimation.html#module-samplics.estimation.replication">samplics.estimation.replication</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../samplics.sae.html">Small Area Estimation</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../samplics.sae.html#samplics-sae-eb-area-model">samplics.sae.eb_area_model</a></li>
<li class="toctree-l3"><a class="reference internal" href="../samplics.sae.html#module-samplics.sae.eb_unit_model">samplics.sae.eb_unit_model</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../samplics.utils.html">Utils</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../samplics.utils.html#module-samplics.utils.checks">samplics.utils.checks module</a></li>
<li class="toctree-l3"><a class="reference internal" href="../samplics.utils.html#module-samplics.utils.formats">samplics.utils.formats module</a></li>
<li class="toctree-l3"><a class="reference internal" href="../samplics.utils.html#module-samplics.utils.hadamard">samplics.utils.hadamard module</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</ul>
</li>
              
            
            
            
            
            
              <li class="hidden-sm"></li>
            
          </ul>

          
            
<form class="navbar-form navbar-right" action="../search.html" method="get">
 <div class="form-group">
  <input type="text" name="q" class="form-control" placeholder="Search" />
 </div>
  <input type="hidden" name="check_keywords" value="yes" />
  <input type="hidden" name="area" value="default" />
</form>
          
        </div>
    </div>
  </div>

<div class="container">
  <div class="row">
    <div class="body col-md-12 content" role="main">
      
  
<style>
/* CSS for nbsphinx extension */

/* remove conflicting styling from Sphinx themes */
div.nbinput.container,
div.nbinput.container div.prompt,
div.nbinput.container div.input_area,
div.nbinput.container div[class*=highlight],
div.nbinput.container div[class*=highlight] pre,
div.nboutput.container,
div.nboutput.container div.prompt,
div.nboutput.container div.output_area,
div.nboutput.container div[class*=highlight],
div.nboutput.container div[class*=highlight] pre {
    background: none;
    border: none;
    padding: 0 0;
    margin: 0;
    box-shadow: none;
}

/* avoid gaps between output lines */
div.nboutput.container div[class*=highlight] pre {
    line-height: normal;
}

/* input/output containers */
div.nbinput.container,
div.nboutput.container {
    display: -webkit-flex;
    display: flex;
    align-items: flex-start;
    margin: 0;
    width: 100%;
}
@media (max-width: 540px) {
    div.nbinput.container,
    div.nboutput.container {
        flex-direction: column;
    }
}

/* input container */
div.nbinput.container {
    padding-top: 5px;
}

/* last container */
div.nblast.container {
    padding-bottom: 5px;
}

/* input prompt */
div.nbinput.container div.prompt pre {
    color: #307FC1;
}

/* output prompt */
div.nboutput.container div.prompt pre {
    color: #BF5B3D;
}

/* all prompts */
div.nbinput.container div.prompt,
div.nboutput.container div.prompt {
    min-width: 5.5ex;
    padding-top: 0.3rem;
    padding-right: 0.3rem;
    text-align: right;
    flex: 0;
}
@media (max-width: 540px) {
    div.nbinput.container div.prompt,
    div.nboutput.container div.prompt {
        text-align: left;
        padding: 0.4em;
    }
    div.nboutput.container div.prompt.empty {
        padding: 0;
    }
}

/* disable scrollbars on prompts */
div.nbinput.container div.prompt pre,
div.nboutput.container div.prompt pre {
    overflow: hidden;
}

/* input/output area */
div.nbinput.container div.input_area,
div.nboutput.container div.output_area {
    -webkit-flex: 1;
    flex: 1;
    overflow: auto;
}
@media (max-width: 540px) {
    div.nbinput.container div.input_area,
    div.nboutput.container div.output_area {
        width: 100%;
    }
}

/* input area */
div.nbinput.container div.input_area {
    border: 1px solid #e0e0e0;
    border-radius: 2px;
    background: #f5f5f5;
}

/* override MathJax center alignment in output cells */
div.nboutput.container div[class*=MathJax] {
    text-align: left !important;
}

/* override sphinx.ext.imgmath center alignment in output cells */
div.nboutput.container div.math p {
    text-align: left;
}

/* standard error */
div.nboutput.container div.output_area.stderr {
    background: #fdd;
}

/* ANSI colors */
.ansi-black-fg { color: #3E424D; }
.ansi-black-bg { background-color: #3E424D; }
.ansi-black-intense-fg { color: #282C36; }
.ansi-black-intense-bg { background-color: #282C36; }
.ansi-red-fg { color: #E75C58; }
.ansi-red-bg { background-color: #E75C58; }
.ansi-red-intense-fg { color: #B22B31; }
.ansi-red-intense-bg { background-color: #B22B31; }
.ansi-green-fg { color: #00A250; }
.ansi-green-bg { background-color: #00A250; }
.ansi-green-intense-fg { color: #007427; }
.ansi-green-intense-bg { background-color: #007427; }
.ansi-yellow-fg { color: #DDB62B; }
.ansi-yellow-bg { background-color: #DDB62B; }
.ansi-yellow-intense-fg { color: #B27D12; }
.ansi-yellow-intense-bg { background-color: #B27D12; }
.ansi-blue-fg { color: #208FFB; }
.ansi-blue-bg { background-color: #208FFB; }
.ansi-blue-intense-fg { color: #0065CA; }
.ansi-blue-intense-bg { background-color: #0065CA; }
.ansi-magenta-fg { color: #D160C4; }
.ansi-magenta-bg { background-color: #D160C4; }
.ansi-magenta-intense-fg { color: #A03196; }
.ansi-magenta-intense-bg { background-color: #A03196; }
.ansi-cyan-fg { color: #60C6C8; }
.ansi-cyan-bg { background-color: #60C6C8; }
.ansi-cyan-intense-fg { color: #258F8F; }
.ansi-cyan-intense-bg { background-color: #258F8F; }
.ansi-white-fg { color: #C5C1B4; }
.ansi-white-bg { background-color: #C5C1B4; }
.ansi-white-intense-fg { color: #A1A6B2; }
.ansi-white-intense-bg { background-color: #A1A6B2; }

.ansi-default-inverse-fg { color: #FFFFFF; }
.ansi-default-inverse-bg { background-color: #000000; }

.ansi-bold { font-weight: bold; }
.ansi-underline { text-decoration: underline; }


div.nbinput.container div.input_area div[class*=highlight] > pre,
div.nboutput.container div.output_area div[class*=highlight] > pre,
div.nboutput.container div.output_area div[class*=highlight].math,
div.nboutput.container div.output_area.rendered_html,
div.nboutput.container div.output_area > div.output_javascript,
div.nboutput.container div.output_area:not(.rendered_html) > img{
    padding: 0.3rem;
}

/* fix copybtn overflow problem in chromium (needed for 'sphinx_copybutton') */
div.nbinput.container div.input_area > div[class^='highlight'],
div.nboutput.container div.output_area > div[class^='highlight']{
    overflow-y: hidden;
}

/* hide copybtn icon on prompts (needed for 'sphinx_copybutton') */
.prompt a.copybtn {
    display: none;
}

/* Some additional styling taken form the Jupyter notebook CSS */
div.rendered_html table {
  border: none;
  border-collapse: collapse;
  border-spacing: 0;
  color: black;
  font-size: 12px;
  table-layout: fixed;
}
div.rendered_html thead {
  border-bottom: 1px solid black;
  vertical-align: bottom;
}
div.rendered_html tr,
div.rendered_html th,
div.rendered_html td {
  text-align: right;
  vertical-align: middle;
  padding: 0.5em 0.5em;
  line-height: normal;
  white-space: normal;
  max-width: none;
  border: none;
}
div.rendered_html th {
  font-weight: bold;
}
div.rendered_html tbody tr:nth-child(odd) {
  background: #f5f5f5;
}
div.rendered_html tbody tr:hover {
  background: rgba(66, 165, 245, 0.2);
}
</style>
<div class="section" id="Tabulation">
<h1>Tabulation<a class="headerlink" href="#Tabulation" title="Permalink to this headline">¶</a></h1>
<p>In this tutorial, we will explore samplics’ APIs for creating design-based tabulations. There are two main python classes for tabulation i.e. <code class="docutils literal notranslate"><span class="pre">Tabulation()</span></code> for one-way tables and <code class="docutils literal notranslate"><span class="pre">CrossTabulation()</span></code> for two-way tables.</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[1]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>

<span class="kn">from</span> <span class="nn">pprint</span> <span class="kn">import</span> <span class="n">pprint</span>

<span class="kn">import</span> <span class="nn">samplics</span>
<span class="kn">from</span> <span class="nn">samplics.datasets</span> <span class="kn">import</span> <span class="n">Birth</span><span class="p">,</span> <span class="n">Nhanes2</span>
<span class="kn">from</span> <span class="nn">samplics.categorical</span> <span class="kn">import</span> <span class="n">Tabulation</span><span class="p">,</span> <span class="n">CrossTabulation</span>
</pre></div>
</div>
</div>
<div class="section" id="One-way-tabulation">
<h2>One-way tabulation<a class="headerlink" href="#One-way-tabulation" title="Permalink to this headline">¶</a></h2>
<p>The birth dataset has four variables: region, agecat, birthcat, and pop. The variables agecat and birthcat are categirical. By default, pandas read them as numerical, because they are coded with numerical values. We use <code class="docutils literal notranslate"><span class="pre">dtype=&quot;string&quot;</span></code> or <code class="docutils literal notranslate"><span class="pre">dtype=&quot;category&quot;</span></code> to ensure that pandas codes the variables as categorical responses.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[2]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="c1"># Load Birth sample data</span>
<span class="n">birth_cls</span> <span class="o">=</span> <span class="n">Birth</span><span class="p">()</span>
<span class="n">birth_cls</span><span class="o">.</span><span class="n">load_data</span><span class="p">()</span>
<span class="n">birth</span> <span class="o">=</span> <span class="n">birth_cls</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">astype</span><span class="p">({</span><span class="s2">&quot;region&quot;</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="s2">&quot;agecat&quot;</span><span class="p">:</span><span class="nb">str</span><span class="p">,</span> <span class="s2">&quot;birthcat&quot;</span><span class="p">:</span> <span class="nb">str</span><span class="p">})</span>

<span class="n">region</span> <span class="o">=</span> <span class="n">birth</span><span class="p">[</span><span class="s2">&quot;region&quot;</span><span class="p">]</span>
<span class="n">agecat</span> <span class="o">=</span> <span class="n">birth</span><span class="p">[</span><span class="s2">&quot;agecat&quot;</span><span class="p">]</span>
<span class="n">birthcat</span> <span class="o">=</span> <span class="n">birth</span><span class="p">[</span><span class="s2">&quot;birthcat&quot;</span><span class="p">]</span>

<span class="n">birth</span><span class="o">.</span><span class="n">head</span><span class="p">(</span><span class="mi">15</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[2]:
</pre></div>
</div>
<div class="output_area rendered_html docutils container">
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>region</th>
      <th>agecat</th>
      <th>birthcat</th>
      <th>pop</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>1</td>
      <td>1</td>
      <td>1.0</td>
      <td>28152</td>
    </tr>
    <tr>
      <th>1</th>
      <td>1</td>
      <td>1</td>
      <td>1.0</td>
      <td>103101</td>
    </tr>
    <tr>
      <th>2</th>
      <td>1</td>
      <td>1</td>
      <td>1.0</td>
      <td>113299</td>
    </tr>
    <tr>
      <th>3</th>
      <td>1</td>
      <td>1</td>
      <td>1.0</td>
      <td>112028</td>
    </tr>
    <tr>
      <th>4</th>
      <td>1</td>
      <td>1</td>
      <td>1.0</td>
      <td>99588</td>
    </tr>
    <tr>
      <th>5</th>
      <td>1</td>
      <td>1</td>
      <td>1.0</td>
      <td>22356</td>
    </tr>
    <tr>
      <th>6</th>
      <td>1</td>
      <td>1</td>
      <td>1.0</td>
      <td>102926</td>
    </tr>
    <tr>
      <th>7</th>
      <td>1</td>
      <td>1</td>
      <td>1.0</td>
      <td>12627</td>
    </tr>
    <tr>
      <th>8</th>
      <td>1</td>
      <td>1</td>
      <td>1.0</td>
      <td>112885</td>
    </tr>
    <tr>
      <th>9</th>
      <td>1</td>
      <td>1</td>
      <td>1.0</td>
      <td>150297</td>
    </tr>
    <tr>
      <th>10</th>
      <td>1</td>
      <td>1</td>
      <td>1.0</td>
      <td>52785</td>
    </tr>
    <tr>
      <th>11</th>
      <td>1</td>
      <td>1</td>
      <td>2.0</td>
      <td>109108</td>
    </tr>
    <tr>
      <th>12</th>
      <td>1</td>
      <td>1</td>
      <td>2.0</td>
      <td>87768</td>
    </tr>
    <tr>
      <th>13</th>
      <td>1</td>
      <td>1</td>
      <td>2.0</td>
      <td>175886</td>
    </tr>
    <tr>
      <th>14</th>
      <td>1</td>
      <td>1</td>
      <td>2.0</td>
      <td>107847</td>
    </tr>
  </tbody>
</table>
</div></div>
</div>
<p>When requesting a table, the user can set <code class="docutils literal notranslate"><span class="pre">parameter=&quot;count&quot;</span></code> which results in a tabulation with counts in the cells while <code class="docutils literal notranslate"><span class="pre">parameter=&quot;proportion</span></code> leads to cells with proportions. The expression <code class="docutils literal notranslate"><span class="pre">Tabulation(&quot;count&quot;)</span></code> instantiates the class <code class="docutils literal notranslate"><span class="pre">Tabulation()</span></code> which has a method <code class="docutils literal notranslate"><span class="pre">tabulate()</span></code> to produce the table.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[3]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">birth_count</span> <span class="o">=</span> <span class="n">Tabulation</span><span class="p">(</span><span class="n">parameter</span><span class="o">=</span><span class="s2">&quot;count&quot;</span><span class="p">)</span>
<span class="n">birth_count</span><span class="o">.</span><span class="n">tabulate</span><span class="p">(</span><span class="n">birthcat</span><span class="p">,</span> <span class="n">remove_nan</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

<span class="nb">print</span><span class="p">(</span><span class="n">birth_count</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>

Tabulation of birthcat
 Number of strata: 1
 Number of PSUs: 956
 Number of observations: 956
 Degrees of freedom: 955.00

 variable category  count  stderror   lower_ci   upper_ci
birthcat      1.0  240.0 13.414066 213.675550 266.324450
birthcat      2.0  450.0 15.441157 419.697485 480.302515
birthcat      3.0  233.0 13.281448 206.935807 259.064193
birthcat      nan   33.0  5.647499  21.917060  44.082940

</pre></div></div>
</div>
<p>When <code class="docutils literal notranslate"><span class="pre">remove_nan=False</span></code>, the numpy and pandas special values NaNs, respectively np.nan and NaN, are treated as valid categories and added to the tables as shown below</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[4]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">birth_count</span> <span class="o">=</span> <span class="n">Tabulation</span><span class="p">(</span><span class="n">parameter</span><span class="o">=</span><span class="s2">&quot;count&quot;</span><span class="p">)</span>
<span class="n">birth_count</span><span class="o">.</span><span class="n">tabulate</span><span class="p">(</span><span class="n">birthcat</span><span class="p">,</span> <span class="n">remove_nan</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>

<span class="nb">print</span><span class="p">(</span><span class="n">birth_count</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>

Tabulation of birthcat
 Number of strata: 1
 Number of PSUs: 956
 Number of observations: 956
 Degrees of freedom: 955.00

 variable category  count  stderror   lower_ci   upper_ci
birthcat      1.0  240.0 13.414066 213.675550 266.324450
birthcat      2.0  450.0 15.441157 419.697485 480.302515
birthcat      3.0  233.0 13.281448 206.935807 259.064193
birthcat      nan   33.0  5.647499  21.917060  44.082940

</pre></div></div>
</div>
<p>The data associated with the tabulation are stored in nested python dictionnaires. The higher level key is the variable name and the inner keys are the response categories. Each of the last four columns shown above are stored in separated dictionnaires. Two of those dictionnaires for the counts and standard errors shown below.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[5]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="nb">print</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">The designed-based estimated counts are:&quot;</span><span class="p">)</span>
<span class="n">pprint</span><span class="p">(</span><span class="n">birth_count</span><span class="o">.</span><span class="n">point_est</span><span class="p">)</span>

<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">The designed-based standard errors are:&quot;</span><span class="p">)</span>
<span class="n">pprint</span><span class="p">(</span><span class="n">birth_count</span><span class="o">.</span><span class="n">stderror</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>

The designed-based estimated counts are:
{&#39;birthcat&#39;: {&#39;1.0&#39;: 240.0, &#39;2.0&#39;: 450.0, &#39;3.0&#39;: 233.0, &#39;nan&#39;: 33.0}}

The designed-based standard errors are:
{&#39;birthcat&#39;: {&#39;1.0&#39;: 13.414066228212429,
              &#39;2.0&#39;: 15.44115667208023,
              &#39;3.0&#39;: 13.281447911983975,
              &#39;nan&#39;: 5.647498635475387}}
</pre></div></div>
</div>
<p>Sometimes, the user may want to run multiple one-way tabules of several variables. In this case, the user can provide the data as a two-dimensional dataframe where each column represents one categorical variable. In this situation, each categorical variable is tabulated individually then combined into Python dictionnaires.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[6]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">birth_count2</span> <span class="o">=</span> <span class="n">Tabulation</span><span class="p">(</span><span class="n">parameter</span><span class="o">=</span><span class="s2">&quot;count&quot;</span><span class="p">)</span>
<span class="n">birth_count2</span><span class="o">.</span><span class="n">tabulate</span><span class="p">(</span><span class="n">birth</span><span class="p">[[</span><span class="s2">&quot;region&quot;</span><span class="p">,</span> <span class="s2">&quot;agecat&quot;</span><span class="p">,</span> <span class="s2">&quot;birthcat&quot;</span><span class="p">]],</span> <span class="n">remove_nan</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

<span class="nb">print</span><span class="p">(</span><span class="n">birth_count2</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>

Tabulation of region
 Number of strata: 1
 Number of PSUs: 956
 Number of observations: 956
 Degrees of freedom: 955.00

 variable category  count  stderror   lower_ci   upper_ci
  region        1  166.0 11.718335 143.003340 188.996660
  region        2  284.0 14.136507 256.257795 311.742205
  region        3  250.0 13.594733 223.321002 276.678998
  region        4  256.0 13.698320 229.117716 282.882284
  agecat        1  507.0 15.439224 476.701278 537.298722
  agecat        2  316.0 14.552307 287.441809 344.558191
  agecat        3  133.0 10.705921 111.990152 154.009848
birthcat      1.0  240.0 13.414066 213.675550 266.324450
birthcat      2.0  450.0 15.441157 419.697485 480.302515
birthcat      3.0  233.0 13.281448 206.935807 259.064193
birthcat      nan   33.0  5.647499  21.917060  44.082940

</pre></div></div>
</div>
<p>Two of the associated Python dictionnaires are shown below. The structure of the inner dictionnaires remain the same but additional key-value pairs are added to represent the several categorical variables.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[7]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="nb">print</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">The designed-based estimated counts are:&quot;</span><span class="p">)</span>
<span class="n">pprint</span><span class="p">(</span><span class="n">birth_count2</span><span class="o">.</span><span class="n">point_est</span><span class="p">)</span>

<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">The designed-based standard errors are:&quot;</span><span class="p">)</span>
<span class="n">pprint</span><span class="p">(</span><span class="n">birth_count2</span><span class="o">.</span><span class="n">stderror</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>

The designed-based estimated counts are:
{&#39;agecat&#39;: {&#39;1&#39;: 507.0, &#39;2&#39;: 316.0, &#39;3&#39;: 133.0},
 &#39;birthcat&#39;: {&#39;1.0&#39;: 240.0, &#39;2.0&#39;: 450.0, &#39;3.0&#39;: 233.0, &#39;nan&#39;: 33.0},
 &#39;region&#39;: {&#39;1&#39;: 166.0, &#39;2&#39;: 284.0, &#39;3&#39;: 250.0, &#39;4&#39;: 256.0}}

The designed-based standard errors are:
{&#39;agecat&#39;: {&#39;1&#39;: 15.43922386351897,
            &#39;2&#39;: 14.55230681053191,
            &#39;3&#39;: 10.705921442206716},
 &#39;birthcat&#39;: {&#39;1.0&#39;: 13.414066228212429,
              &#39;2.0&#39;: 15.44115667208023,
              &#39;3.0&#39;: 13.281447911983975,
              &#39;nan&#39;: 5.647498635475387},
 &#39;region&#39;: {&#39;1&#39;: 11.718334853030482,
            &#39;2&#39;: 14.136507266518667,
            &#39;3&#39;: 13.594732580183457,
            &#39;4&#39;: 13.698320300591305}}
</pre></div></div>
</div>
<p>In the example above, we used pandas series and dataframes with labelled variables. In some situations, the user may want to tabulate numpy arrays, lists or tuples without variable names atrribute from the data. For these situations, the <code class="docutils literal notranslate"><span class="pre">varnames</span></code> parameter provides a way to assign names for the categorical variables. Even when the variables have labels, users can leverage <code class="docutils literal notranslate"><span class="pre">varnames</span></code> to rename the categorical variables.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[8]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">region_no_name</span> <span class="o">=</span> <span class="n">birth</span><span class="p">[</span><span class="s2">&quot;region&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">to_numpy</span><span class="p">()</span>
<span class="n">agecat_no_name</span> <span class="o">=</span> <span class="n">birth</span><span class="p">[</span><span class="s2">&quot;agecat&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">to_numpy</span><span class="p">()</span>
<span class="n">birthcat_no_name</span> <span class="o">=</span> <span class="n">birth</span><span class="p">[</span><span class="s2">&quot;birthcat&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">to_numpy</span><span class="p">()</span>

<span class="n">birth_prop_new_name</span> <span class="o">=</span> <span class="n">Tabulation</span><span class="p">(</span><span class="n">parameter</span><span class="o">=</span><span class="s2">&quot;proportion&quot;</span><span class="p">)</span>
<span class="n">birth_prop_new_name</span><span class="o">.</span><span class="n">tabulate</span><span class="p">(</span>
    <span class="nb">vars</span><span class="o">=</span><span class="p">[</span><span class="n">region_no_name</span><span class="p">,</span> <span class="n">agecat_no_name</span><span class="p">,</span> <span class="n">birthcat_no_name</span><span class="p">],</span>
    <span class="n">varnames</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;Region&quot;</span><span class="p">,</span> <span class="s2">&quot;AgeGroup&quot;</span><span class="p">,</span> <span class="s2">&quot;BirthType&quot;</span><span class="p">],</span>
    <span class="n">remove_nan</span><span class="o">=</span><span class="kc">True</span>
<span class="p">)</span>

<span class="nb">print</span><span class="p">(</span><span class="n">birth_prop_new_name</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>

Tabulation of Region
 Number of strata: 1
 Number of PSUs: 956
 Number of observations: 956
 Degrees of freedom: 955.00

  variable category  proportion  stderror  lower_ci  upper_ci
   Region        1    0.173640  0.012258  0.150883  0.199025
   Region        2    0.297071  0.014787  0.268892  0.326883
   Region        3    0.261506  0.014220  0.234574  0.290357
   Region        4    0.267782  0.014329  0.240614  0.296819
 AgeGroup        1    0.530335  0.016150  0.498562  0.561864
 AgeGroup        2    0.330544  0.015222  0.301383  0.361068
 AgeGroup        3    0.139121  0.011199  0.118564  0.162586
BirthType      1.0    0.251046  0.014031  0.224524  0.279571
BirthType      2.0    0.470711  0.016152  0.439174  0.502484
BirthType      3.0    0.243724  0.013893  0.217502  0.272008
BirthType      nan    0.034519  0.005907  0.024627  0.048188

</pre></div></div>
</div>
<p>If the user does not specify <code class="docutils literal notranslate"><span class="pre">varnames</span></code>, the <code class="docutils literal notranslate"><span class="pre">tabulate()</span></code> creates generic variables names <code class="docutils literal notranslate"><span class="pre">var_1,</span> <span class="pre">var_2,</span> <span class="pre">etc</span></code>.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[9]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">birth_prop_new_name2</span> <span class="o">=</span> <span class="n">Tabulation</span><span class="p">(</span><span class="n">parameter</span><span class="o">=</span><span class="s2">&quot;proportion&quot;</span><span class="p">)</span>
<span class="n">birth_prop_new_name2</span><span class="o">.</span><span class="n">tabulate</span><span class="p">(</span>
    <span class="nb">vars</span><span class="o">=</span><span class="p">[</span><span class="n">region_no_name</span><span class="p">,</span> <span class="n">agecat_no_name</span><span class="p">,</span> <span class="n">birthcat_no_name</span><span class="p">],</span>
    <span class="n">remove_nan</span><span class="o">=</span><span class="kc">True</span>
<span class="p">)</span>

<span class="nb">print</span><span class="p">(</span><span class="n">birth_prop_new_name2</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>

Tabulation of var_1
 Number of strata: 1
 Number of PSUs: 956
 Number of observations: 956
 Degrees of freedom: 955.00

 variable category  proportion  stderror  lower_ci  upper_ci
   var_1        1    0.173640  0.012258  0.150883  0.199025
   var_1        2    0.297071  0.014787  0.268892  0.326883
   var_1        3    0.261506  0.014220  0.234574  0.290357
   var_1        4    0.267782  0.014329  0.240614  0.296819
   var_2        1    0.530335  0.016150  0.498562  0.561864
   var_2        2    0.330544  0.015222  0.301383  0.361068
   var_2        3    0.139121  0.011199  0.118564  0.162586
   var_3      1.0    0.251046  0.014031  0.224524  0.279571
   var_3      2.0    0.470711  0.016152  0.439174  0.502484
   var_3      3.0    0.243724  0.013893  0.217502  0.272008
   var_3      nan    0.034519  0.005907  0.024627  0.048188

</pre></div></div>
</div>
<p>If the data was collected from a complex survey sample, the user may provide the sample design information to derive design-based statistics for the tabulation.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[10]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="c1"># Load Nhanes sample data</span>
<span class="n">nhanes2_cls</span> <span class="o">=</span> <span class="n">Nhanes2</span><span class="p">()</span>
<span class="n">nhanes2_cls</span><span class="o">.</span><span class="n">load_data</span><span class="p">()</span>
<span class="n">nhanes2</span> <span class="o">=</span> <span class="n">nhanes2_cls</span><span class="o">.</span><span class="n">data</span>

<span class="n">stratum</span> <span class="o">=</span> <span class="n">nhanes2</span><span class="p">[</span><span class="s2">&quot;stratid&quot;</span><span class="p">]</span>
<span class="n">psu</span> <span class="o">=</span> <span class="n">nhanes2</span><span class="p">[</span><span class="s2">&quot;psuid&quot;</span><span class="p">]</span>
<span class="n">weight</span> <span class="o">=</span> <span class="n">nhanes2</span><span class="p">[</span><span class="s2">&quot;finalwgt&quot;</span><span class="p">]</span>

<span class="n">diabetes_nhanes</span> <span class="o">=</span> <span class="n">Tabulation</span><span class="p">(</span><span class="s2">&quot;proportion&quot;</span><span class="p">)</span>
<span class="n">diabetes_nhanes</span><span class="o">.</span><span class="n">tabulate</span><span class="p">(</span>
    <span class="nb">vars</span><span class="o">=</span><span class="n">nhanes2</span><span class="p">[[</span><span class="s2">&quot;race&quot;</span><span class="p">,</span> <span class="s2">&quot;diabetes&quot;</span><span class="p">]],</span> <span class="n">samp_weight</span><span class="o">=</span><span class="n">weight</span><span class="p">,</span> <span class="n">stratum</span><span class="o">=</span><span class="n">stratum</span><span class="p">,</span> <span class="n">psu</span><span class="o">=</span><span class="n">psu</span><span class="p">,</span> <span class="n">remove_nan</span><span class="o">=</span><span class="kc">True</span>
<span class="p">)</span>

<span class="nb">print</span><span class="p">(</span><span class="n">diabetes_nhanes</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>

Tabulation of race
 Number of strata: 31
 Number of PSUs: 62
 Number of observations: 10335
 Degrees of freedom: 31.00

 variable category  proportion  stderror  lower_ci  upper_ci
    race      1.0    0.879016  0.016722  0.840568  0.909194
    race      2.0    0.095615  0.012778  0.072541  0.125039
    race      3.0    0.025369  0.010554  0.010781  0.058528
diabetes      0.0    0.965715  0.001820  0.961803  0.969238
diabetes      1.0    0.034285  0.001820  0.030762  0.038197

</pre></div></div>
</div>
</div>
<div class="section" id="Two-way-tabulation-(cross-tabulation)">
<h2>Two-way tabulation (cross-tabulation)<a class="headerlink" href="#Two-way-tabulation-(cross-tabulation)" title="Permalink to this headline">¶</a></h2>
<p>Cross-tabulation of two categorical variables is achieved by using the class <code class="docutils literal notranslate"><span class="pre">CrossTabulation()</span></code>. As above, cross-tabulation is possible for counts and proportions using <code class="docutils literal notranslate"><span class="pre">CrossTabulation(parameter=&quot;count&quot;)</span></code> and <code class="docutils literal notranslate"><span class="pre">CrossTabulation(parameter=&quot;proportion&quot;)</span></code>, respectively. The Python script below creates a design-based cross-tabulation of race by diabetes status. The sample design information is optional; when not provided, a simple random sample (srs) is assumed.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[11]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">crosstab_nhanes</span> <span class="o">=</span> <span class="n">CrossTabulation</span><span class="p">(</span><span class="s2">&quot;proportion&quot;</span><span class="p">)</span>
<span class="n">crosstab_nhanes</span><span class="o">.</span><span class="n">tabulate</span><span class="p">(</span>
    <span class="nb">vars</span><span class="o">=</span><span class="n">nhanes2</span><span class="p">[[</span><span class="s2">&quot;race&quot;</span><span class="p">,</span> <span class="s2">&quot;diabetes&quot;</span><span class="p">]],</span> <span class="n">samp_weight</span><span class="o">=</span><span class="n">weight</span><span class="p">,</span> <span class="n">stratum</span><span class="o">=</span><span class="n">stratum</span><span class="p">,</span> <span class="n">psu</span><span class="o">=</span><span class="n">psu</span><span class="p">,</span> <span class="n">remove_nan</span><span class="o">=</span><span class="kc">True</span>
<span class="p">)</span>

<span class="nb">print</span><span class="p">(</span><span class="n">crosstab_nhanes</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>

Cross-tabulation of race and diabetes
 Number of strata: 31
 Number of PSUs: 62
 Number of observations: 10335
 Degrees of freedom: 31.00

 race diabetes  proportion  stderror  lower_ci  upper_ci
   1      0.0    0.850866  0.015850  0.815577  0.880392
   1      1.0    0.028123  0.001938  0.024430  0.032357
   2      0.0    0.089991  0.012171  0.068062  0.118090
   2      1.0    0.005646  0.000847  0.004157  0.007663
   3      0.0    0.024858  0.010188  0.010702  0.056669
   3      1.0    0.000516  0.000387  0.000112  0.002383

Pearson (with Rao-Scott adjustment):
        Unadjusted - chi2(2): 21.2661 with p-value of 0.0000
        Adjusted - F(1.52, 47.26): 14.9435  with p-value of 0.0000

  Likelihood ratio (with Rao-Scott adjustment):
         Unadjusted - chi2(2): 18.3925 with p-value of 0.0001
         Adjusted - F(1.52, 47.26): 12.9242  with p-value of 0.0001

</pre></div></div>
</div>
<p>In addition to pandas dataframe, the categorical variables may be provided as an numpy array, list or tuple. In the examples below, the categorical variables are provided as a tuple <code class="docutils literal notranslate"><span class="pre">vars=(rage,</span> <span class="pre">diabetes).</span></code> In this case, <code class="docutils literal notranslate"><span class="pre">race</span></code> and <code class="docutils literal notranslate"><span class="pre">diabetes</span></code> are numpy arrays and do not have a name attribute. The parameter <code class="docutils literal notranslate"><span class="pre">varnames</span></code> allows the user to name the categorical variables. If varnames is not specified then <code class="docutils literal notranslate"><span class="pre">var_1</span></code> and <code class="docutils literal notranslate"><span class="pre">var_2</span></code> are used as variables names.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[12]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">race</span> <span class="o">=</span> <span class="n">nhanes2</span><span class="p">[</span><span class="s2">&quot;race&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">to_numpy</span><span class="p">()</span>
<span class="n">diabetes</span> <span class="o">=</span> <span class="n">nhanes2</span><span class="p">[</span><span class="s2">&quot;diabetes&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">to_numpy</span><span class="p">()</span>

<span class="n">crosstab_nhanes</span> <span class="o">=</span> <span class="n">CrossTabulation</span><span class="p">(</span><span class="s2">&quot;proportion&quot;</span><span class="p">)</span>
<span class="n">crosstab_nhanes</span><span class="o">.</span><span class="n">tabulate</span><span class="p">(</span>
    <span class="nb">vars</span><span class="o">=</span><span class="p">(</span><span class="n">race</span><span class="p">,</span> <span class="n">diabetes</span><span class="p">),</span> <span class="n">samp_weight</span><span class="o">=</span><span class="n">weight</span><span class="p">,</span> <span class="n">stratum</span><span class="o">=</span><span class="n">stratum</span><span class="p">,</span> <span class="n">psu</span><span class="o">=</span><span class="n">psu</span><span class="p">,</span> <span class="n">remove_nan</span><span class="o">=</span><span class="kc">True</span>
<span class="p">)</span>

<span class="nb">print</span><span class="p">(</span><span class="n">crosstab_nhanes</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>

Cross-tabulation of var_1 and var_2
 Number of strata: 31
 Number of PSUs: 62
 Number of observations: 10335
 Degrees of freedom: 31.00

 var_1 var_2  proportion  stderror  lower_ci  upper_ci
  1.0   0.0    0.850866  0.015850  0.815577  0.880392
  1.0   1.0    0.028123  0.001938  0.024430  0.032357
  2.0   0.0    0.089991  0.012171  0.068062  0.118090
  2.0   1.0    0.005646  0.000847  0.004157  0.007663
  3.0   0.0    0.024858  0.010188  0.010702  0.056669
  3.0   1.0    0.000516  0.000387  0.000112  0.002383

Pearson (with Rao-Scott adjustment):
        Unadjusted - chi2(2): 21.2661 with p-value of 0.0000
        Adjusted - F(1.52, 47.26): 14.9435  with p-value of 0.0000

  Likelihood ratio (with Rao-Scott adjustment):
         Unadjusted - chi2(2): 18.3925 with p-value of 0.0001
         Adjusted - F(1.52, 47.26): 12.9242  with p-value of 0.0001

</pre></div></div>
</div>
<p>Same as the above example with variables names specified by <code class="docutils literal notranslate"><span class="pre">varnames=[&quot;Race&quot;,</span> <span class="pre">DiabetesStatus&quot;]</span></code></p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[13]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">crosstab_nhanes</span> <span class="o">=</span> <span class="n">CrossTabulation</span><span class="p">(</span><span class="s2">&quot;proportion&quot;</span><span class="p">)</span>
<span class="n">crosstab_nhanes</span><span class="o">.</span><span class="n">tabulate</span><span class="p">(</span>
    <span class="nb">vars</span><span class="o">=</span><span class="p">(</span><span class="n">race</span><span class="p">,</span> <span class="n">diabetes</span><span class="p">),</span> <span class="n">varnames</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;Race&quot;</span><span class="p">,</span> <span class="s2">&quot;DiabetesStatus&quot;</span><span class="p">],</span> <span class="n">samp_weight</span><span class="o">=</span><span class="n">weight</span><span class="p">,</span> <span class="n">stratum</span><span class="o">=</span><span class="n">stratum</span><span class="p">,</span> <span class="n">psu</span><span class="o">=</span><span class="n">psu</span><span class="p">,</span> <span class="n">remove_nan</span><span class="o">=</span><span class="kc">True</span>
<span class="p">)</span>

<span class="nb">print</span><span class="p">(</span><span class="n">crosstab_nhanes</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>

Cross-tabulation of Race and DiabetesStatus
 Number of strata: 31
 Number of PSUs: 62
 Number of observations: 10335
 Degrees of freedom: 31.00

 Race DiabetesStatus  proportion  stderror  lower_ci  upper_ci
 1.0            0.0    0.850866  0.015850  0.815577  0.880392
 1.0            1.0    0.028123  0.001938  0.024430  0.032357
 2.0            0.0    0.089991  0.012171  0.068062  0.118090
 2.0            1.0    0.005646  0.000847  0.004157  0.007663
 3.0            0.0    0.024858  0.010188  0.010702  0.056669
 3.0            1.0    0.000516  0.000387  0.000112  0.002383

Pearson (with Rao-Scott adjustment):
        Unadjusted - chi2(2): 21.2661 with p-value of 0.0000
        Adjusted - F(1.52, 47.26): 14.9435  with p-value of 0.0000

  Likelihood ratio (with Rao-Scott adjustment):
         Unadjusted - chi2(2): 18.3925 with p-value of 0.0001
         Adjusted - F(1.52, 47.26): 12.9242  with p-value of 0.0001

</pre></div></div>
</div>
</div>
</div>


    </div>
      
  </div>
</div>
<footer class="footer">
  <div class="container">
    <p class="pull-right">
      <a href="#">Back to top</a>
      
    </p>
    <p>
        &copy; Copyright 2019-2020, samplics.<br/>
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 3.5.4.<br/>
    </p>
  </div>
</footer>
  </body>
</html>